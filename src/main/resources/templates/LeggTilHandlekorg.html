<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

</head>
<body>
    <div class="mb-3">
        <label>Name: <span id="navn" th:text="${vare.navn}"></span></label>
        <label>Materiale: <span id="materiale" th:text="${vare.materiale}"></span></label>
        <p hidden id="strekkode" th:text="${vare.strekkode}"></p>
        <p hidden id="instruksjon" th:text="${vare.instruksjon}"></p>
        <p hidden id="vekt" th:text="vekt"></p>

    <button id="leggTilHandlekorg">Legg til i handlekorg</button>
    </div>

    <script th:inline="javascript">
        document.getElementById("leggTilHandlekorg").addEventListener("click", function (){
            let strekkode =document.getElementById("strekkode").textContent;
            let navn = document.getElementById("navn").textContent;
            let materiale = document.getElementById("materiale").textContent;
            let instruksjon = document.getElementById("instruksjon")
            let vekt = document.getElementById("vekt")

            let vare = {
                strekkode: strekkode,
                navn : navn,
                materiale: materiale,
                instruksjon: instruksjon,
                vekt: vekt
            }

            let url = "http://localhost:8080/legg-til-handlekorg";

            fetch(url,{
                method: "POST",
                headers: {
                    "Content-Type" : "application/json"
                },
                body: JSON.stringify(vare)
            }).then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
                .then(data => {
                    console.log('POST request succeeded with JSON response', data);
                })
                .catch(error => {
                    console.error('Error making POST request:', error);
                });
        })
    </script>
</body>
</html>